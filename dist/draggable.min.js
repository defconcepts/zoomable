(function(){var e;window.draggable=e=function(t,n){var o,i;return this instanceof e?(this.element=t,this._defaults={contained:!1,pens:!1,vertical:!0,horizontal:!0,disabled:!1,parent:void 0,boundsOverride:void 0,handle:void 0},o=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},i=function(e,t){var n;for(n in t)void 0!==n&&(e["_"+n]=t[n]);return e},this._options=o(this._defaults,n),i(this,this._options),this._parent=this._options.contained&&void 0!==this._options.container?this._options.container:this._options.contained?this.element.parentNode:window,void 0!==this._options.handle&&"string"==typeof this._options.handle&&(this._handle=this.element.querySelectorAll(this._options.handle)[0]),this._touch="ontouchstart"in window,this._create(),this):new e(t,n)},e.prototype.setPens=function(e){return e?this._pens=e:void 0},e.prototype.setDisabled=function(e){return void 0!==e?this._disabled=e:void 0},e.prototype.setContained=function(e){return void 0!==e?this._contained=e:void 0},e.prototype.setRoam=function(e){return void 0!==e?this._roam=e:void 0},e.prototype.setVertical=function(e){return void 0!==e?this._vertical=e:void 0},e.prototype.setHorizontal=function(e){return void 0!==e?this._horizontal=e:void 0},e.prototype.setGhosting=function(e){return void 0!==e?this._ghosting=e:void 0},e.prototype._create=function(){var e,t,n,o,i;return o=this,n=void 0,e=function(e){var n;return o._touch&&(e.preventDefault(),document.body.style.overflow="hidden",e=e.touches[0]),o.element.style.position="absolute",o._newY=e.clientY-o._offY,o._newX=e.clientX-o._offX,o._contained&&(n=0,void 0!==o._boundsOverride&&(n="string"==typeof o._boundsOverride?parseInt(o._boundsOverride,10):o._boundsOverride*Math.min(o.element.offsetHeight,o.element.offsetWidth)),o._newX+o._boundsXL<o._boundsXL-n&&(o._newX=0-n),o._newX+o._boundsXL>o._boundsXR+n&&(o._newX=o._parent.offsetWidth-o.element.offsetWidth+n),o._newY+o._boundsXT>o._boundsXB+n&&(o._newY=o._parent.offsetHeight-o.element.offsetHeight+n),o._newY+o._boundsXT<o._boundsXT-n&&(o._newY=0-n)),o._horizontal&&(o.element.style.left=o._newX+"px"),o._vertical&&(o.element.style.top=o._newY+"px"),o._parent.addEventListener("dblclick",t)},t=function(){var t,i,s,d;if(o._touch&&(document.body.style.overflow=""),o._disabled)return!1;if(void 0!==n&&[].forEach.call(document.querySelectorAll("[draggable-ghost]"),function(e){return e.remove()}),o._touch?void 0!==o._handle?o._handle.removeEventListener("touchmove",e,!0):o.element.removeEventListener("touchmove",e,!0):o._parent.removeEventListener("mousemove",e,!0),o._pens&&o._pens.length>0){for(d=!1,t=o.element.parentNode,s=function(){var e;for(e=0;e<=o._pens.length-1;){if(t===o._pens[e])return!0;e++}},i=0;i<o._pens.length;){if(o._newX<o._pens[i].offsetLeft+o._pens[i].offsetWidth&&o._newX>o._pens[i].offsetLeft-o.element.offsetWidth&&o._newY>o._pens[i].offsetTop-o.element.offsetHeight&&o._newY<o._pens[i].offsetTop+o._pens[i].offsetHeight+o.element.offsetHeight){d=!0,o.element.style.position="",o._pens[i].appendChild(o.element);break}i++}if(!d){if(o._roam)return document.querySelector("body").appendChild(o.element);if(s(t))return t.appendChild(o.element),o.element.style.position=""}}},i=function(t){return o._touch&&(document.body.style.overflow="hidden",t.preventDefault(),t=t.touches[0]),o._disabled?!1:(o._offY=t.clientY-parseInt(o.element.offsetTop),o._offX=t.clientX-parseInt(o.element.offsetLeft),o._boundsXR=o._parent.offsetLeft+o._parent.offsetWidth-o.element.offsetWidth,o._boundsXL=o._parent.offsetLeft,o._boundsXT=o._parent.offsetTop,o._boundsXB=o._parent.offsetTop+o._parent.offsetHeight-o.element.offsetHeight,o._ghosting&&(n=o.element.cloneNode(),o.element.parentNode.appendChild(n),n.style.opacity=.2,n.style.position="absolute",n.style.left=o.element.offsetLeft+"px",n.style.top=o.element.offsetTop+"px",n.setAttribute("draggable-ghost","true")),o._touch?void 0!==o._handle?o._handle.addEventListener("touchmove",e,!0):o.element.addEventListener("touchmove",e,!0):o._parent.addEventListener("mousemove",e,!0))},o._touch?void 0!==o._handle?(o._handle.addEventListener("touchstart",i,!1),o._handle.addEventListener("touchend",t,!1)):(o.element.addEventListener("touchstart",i,!1),o.element.addEventListener("touchend",t,!1)):void 0!==o._handle?(o._handle.addEventListener("mousedown",i,!1),o._handle.addEventListener("mouseup",t,!1)):(o.element.addEventListener("mousedown",i,!1),o.element.addEventListener("mouseup",t,!1))}}).call(this);